<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frontend Test - QuickBooks AI Agent</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test { margin: 10px; padding: 10px; border: 1px solid #ccc; }
        .pass { background: #d4edda; border-color: #c3e6cb; }
        .fail { background: #f8d7da; border-color: #f5c6cb; }
    </style>
</head>
<body>
    <h1>QuickBooks AI Agent - Frontend Tests</h1>
    <div id="tests"></div>

    <script>
        class FrontendTester {
            constructor() {
                this.tests = [];
                this.testsContainer = document.getElementById('tests');
            }

            addTest(name, testFn) {
                this.tests.push({ name, testFn });
            }

            async runTests() {
                for (const test of this.tests) {
                    try {
                        await test.testFn();
                        this.displayResult(test.name, true);
                    } catch (error) {
                        this.displayResult(test.name, false, error.message);
                    }
                }
            }

            displayResult(name, passed, error = '') {
                const div = document.createElement('div');
                div.className = `test ${passed ? 'pass' : 'fail'}`;
                div.innerHTML = `
                    <strong>${name}</strong>: ${passed ? 'PASS' : 'FAIL'}
                    ${error ? `<br><small>Error: ${error}</small>` : ''}
                `;
                this.testsContainer.appendChild(div);
            }

            assert(condition, message) {
                if (!condition) {
                    throw new Error(message);
                }
            }
        }

        const tester = new FrontendTester();

        // Test 1: Check if required files exist
        tester.addTest('Required Files Check', async () => {
            const files = ['index.html', 'app.js', 'styles.css'];
            // This is a mock test - in real testing you'd check file existence
            tester.assert(true, 'All required files should exist');
        });

        // Test 2: Test QuickBooksAI class initialization
        tester.addTest('QuickBooksAI Initialization', async () => {
            // Load the app.js file content for testing
            const script = document.createElement('script');
            script.src = '../frontend/app.js';
            document.head.appendChild(script);
            
            await new Promise(resolve => {
                script.onload = resolve;
            });

            // Test class exists
            tester.assert(typeof QuickBooksAI !== 'undefined', 'QuickBooksAI class should be defined');
        });

        // Test 3: Test API endpoint configuration
        tester.addTest('API Configuration', async () => {
            const defaultEndpoint = 'https://your-api-gateway-url.amazonaws.com/prod';
            tester.assert(defaultEndpoint.includes('amazonaws.com'), 'API endpoint should be AWS API Gateway URL');
        });

        // Test 4: Test HTML structure
        tester.addTest('HTML Structure', async () => {
            // This would load and parse the actual HTML file
            const requiredElements = [
                'chat-container',
                'message-input',
                'send-button',
                'settings-modal'
            ];
            
            // Mock test - in real testing you'd load the HTML and check elements
            tester.assert(true, 'HTML should contain required elements');
        });

        // Test 5: Test CSS loading
        tester.addTest('CSS Styles', async () => {
            // Check if CSS variables are defined
            const root = document.documentElement;
            const style = getComputedStyle(root);
            
            // Mock test for CSS variables
            tester.assert(true, 'CSS variables should be properly defined');
        });

        // Run all tests
        document.addEventListener('DOMContentLoaded', () => {
            tester.runTests();
        });
    </script>
</body>
</html>
